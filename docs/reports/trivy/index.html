<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Trivy | Fairwinds Insights Documentation</title>
    <meta name="generator" content="VuePress 1.5.3">
    <link rel="icon" href="/favicon.png">
    <meta name="description" content="Trivy, an open source tool for scanning Docker images for vulnerabilities, runs scans on your cluster, and results are uploaded to Fairwinds Insights.">
    <meta name="title" content="Trivy and Fairwinds Insights">
    <meta name="keywords" content="Fairwinds Insights, Kubernetes Audit, Kubernetes configuration validation, Trivy, open source">
    <link rel="preload" href="/assets/css/0.styles.ba7d046e.css" as="style"><link rel="preload" href="/assets/js/app.3f30fc07.js" as="script"><link rel="preload" href="/assets/js/2.d0aaf875.js" as="script"><link rel="preload" href="/assets/js/38.2205922a.js" as="script"><link rel="prefetch" href="/assets/js/10.95e8994a.js"><link rel="prefetch" href="/assets/js/11.94fbe278.js"><link rel="prefetch" href="/assets/js/12.67ba9854.js"><link rel="prefetch" href="/assets/js/13.f9b526f3.js"><link rel="prefetch" href="/assets/js/14.13242d52.js"><link rel="prefetch" href="/assets/js/15.b8085640.js"><link rel="prefetch" href="/assets/js/16.181a3ec8.js"><link rel="prefetch" href="/assets/js/17.daffa268.js"><link rel="prefetch" href="/assets/js/18.56947fc0.js"><link rel="prefetch" href="/assets/js/19.431c02e4.js"><link rel="prefetch" href="/assets/js/20.277ad29a.js"><link rel="prefetch" href="/assets/js/21.093f1251.js"><link rel="prefetch" href="/assets/js/22.bbe87c87.js"><link rel="prefetch" href="/assets/js/23.2f3a810f.js"><link rel="prefetch" href="/assets/js/24.09b97633.js"><link rel="prefetch" href="/assets/js/25.c8a8f748.js"><link rel="prefetch" href="/assets/js/26.044eee2e.js"><link rel="prefetch" href="/assets/js/27.bb7c0ba1.js"><link rel="prefetch" href="/assets/js/28.4c84525b.js"><link rel="prefetch" href="/assets/js/29.392e0389.js"><link rel="prefetch" href="/assets/js/3.dd930c85.js"><link rel="prefetch" href="/assets/js/30.c81f7dd9.js"><link rel="prefetch" href="/assets/js/31.5e722c05.js"><link rel="prefetch" href="/assets/js/32.4b2b2306.js"><link rel="prefetch" href="/assets/js/33.5df5845e.js"><link rel="prefetch" href="/assets/js/34.103cff8e.js"><link rel="prefetch" href="/assets/js/35.eb95fe80.js"><link rel="prefetch" href="/assets/js/36.5ef2f91c.js"><link rel="prefetch" href="/assets/js/37.e2707fd5.js"><link rel="prefetch" href="/assets/js/39.ab4fcd47.js"><link rel="prefetch" href="/assets/js/4.3b6a7e49.js"><link rel="prefetch" href="/assets/js/5.c03b1cde.js"><link rel="prefetch" href="/assets/js/6.7c1f35f3.js"><link rel="prefetch" href="/assets/js/7.cf565cf0.js"><link rel="prefetch" href="/assets/js/8.72bdfd08.js"><link rel="prefetch" href="/assets/js/9.9665c39f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ba7d046e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.svg" alt="Fairwinds Insights Documentation" class="logo"> <span class="site-name can-hide">Fairwinds Insights Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Home</a></li><li><a href="/release-notes/" class="sidebar-link">Release Notes</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Installation</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/installation/getting-started/" class="sidebar-link">Getting Started</a></li><li><a href="/installation/insights-agent/" class="sidebar-link">Insights Agent</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>First Steps</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Features</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Reports</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/reports/polaris/" class="sidebar-link">Polaris</a></li><li><a href="/reports/goldilocks/" class="sidebar-link">Goldilocks</a></li><li><a href="/reports/trivy/" aria-current="page" class="active sidebar-link">Trivy</a></li><li><a href="/reports/kubesec/" class="sidebar-link">Kubesec</a></li><li><a href="/reports/kube-hunter/" class="sidebar-link">Kube-hunter</a></li><li><a href="/reports/release-watcher/" class="sidebar-link">Release Watcher</a></li><li><a href="/reports/rbac-reporter/" class="sidebar-link">RBAC Reporter</a></li><li><a href="/reports/workloads/" class="sidebar-link">Workloads</a></li><li><a href="/reports/rbac-requirements/" class="sidebar-link">RBAC requirements</a></li><li><a href="/reports/new/" class="sidebar-link">Create a new plugin</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Integrations</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Management</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>API Access</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="trivy"><a href="#trivy" class="header-anchor">#</a> Trivy</h1> <p><a href="https://github.com/aquasecurity/trivy" target="_blank" rel="noopener noreferrer">Trivy<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> is an open source tool for scanning Docker images
for vulnerabilities. These scans run on your cluster, and the results are uploaded to Insights</p> <h2 id="remediation"><a href="#remediation" class="header-anchor">#</a> Remediation</h2> <p>If you're seeing Action Items from the Trivy report, there are two typical routes for resolution:</p> <ul><li>If the report is for a third-party library (e.g. a Helm chart), try updating to the latest version.
If that doesn't solve the problem, notify the maintainer that the latest version has a vulnerability,
e.g. by opening a GitHub issue.</li> <li>If the report is for an application you own, try updating the base image and any libraries you've
installed on top of it.</li></ul> <h2 id="private-images"><a href="#private-images" class="header-anchor">#</a> Private Images</h2> <p>On some cloud providers, your nodes will be automatically configured to have access to your
container registry. For example, GKE nodes should be able to pull images from Google Container
Registry automatically.</p> <p>But in many cases, you'll need to grant Trivy permission to access private images. To do so,
you'll need to create a Kubernetes Secret, and pass the name of that secret to the Helm
installation of the Insights Agent</p> <p>For example, to create a secret from your personal dockerconfig, you could run:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>kubectl create secret generic insights-pull --from-file<span class="token operator">=</span>config.json<span class="token operator">=</span><span class="token environment constant">$HOME</span>/.docker/config.json -n insights-agent
</code></pre></div><p>Note that we named the secret <code>insights-pull</code>, and put it in the <code>insights-agent</code> namespace.
We can then install the agent with</p> <div class="language-bash extra-class"><pre class="language-bash"><code>  --set trivy.privateImages.dockerConfigSecret<span class="token operator">=</span>insights-pull
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/FairwindsOps/insights-docs/edit/master/reports/trivy.md" target="_blank" rel="noopener noreferrer">Help us improve this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/reports/goldilocks/" class="prev">
        Goldilocks
      </a></span> <span class="next"><a href="/reports/kubesec/">
        Kubesec
      </a>
      ‚Üí
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3f30fc07.js" defer></script><script src="/assets/js/2.d0aaf875.js" defer></script><script src="/assets/js/38.2205922a.js" defer></script>
  </body>
</html>
