(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{368:function(e,a,t){"use strict";t.r(a);var s=t(42),i=Object(s.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"container-security"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#container-security"}},[e._v("#")]),e._v(" Container Security")]),e._v(" "),t("p",[e._v("One of the easiest ways for vulnerabilities to sneak into your cluster is via\na Docker image. Even if you're scanning images as part of CI/CD or your registry,\na CVE could be announced at any time, even after the image has made it into your cluster.\nSo it's critical to proactively scan the images that are running in your cluster.")]),e._v(" "),t("p",[e._v("Fairwinds Insights employs Trivy, an open source container scanning solution, to create\nAction Items for any image with known vulnerabilities.")]),e._v(" "),t("p",[e._v("To get started with Trivy, you can filter for action items that come from its reports:")]),e._v(" "),t("div",{staticClass:"mini-img"},[t("img",{attrs:{src:e.$withBase("/img/filter-trivy.png"),alt:"Filter for Trivy items"}})]),e._v(" "),t("p",[e._v("You may also want to filter for particular namespaces. For instance, it's good to start with\nnamespaces for your own applications, rather than core or add-on namespaces like "),t("code",[e._v("kube-system")]),e._v(" or "),t("code",[e._v("metrics-server")]),e._v(".")]),e._v(" "),t("div",{staticClass:"mini-img"},[t("img",{attrs:{src:e.$withBase("/img/filter-namespaces.png"),alt:"Filter namespaces"}})]),e._v(" "),t("p",[e._v("If you've got several vulnerable containers, you can expand them to see details for the individual\npackages that are affected, as well as the severity level for each package. Be on the lookout for\npackages that you know your applications are using, like PHP or cURL.")]),e._v(" "),t("img",{attrs:{src:e.$withBase("/img/trivy-details.png"),alt:"Trivy details"}}),e._v(" "),t("p",[e._v("Once you've identified a vulnerable image that you'd like to fix, you have a few different options:")]),e._v(" "),t("h2",{attrs:{id:"images-you-own"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#images-you-own"}},[e._v("#")]),e._v(" Images you own")]),e._v(" "),t("p",[e._v("If you own the Dockerfile that generated this image, you have a couple options at your disposal.")]),e._v(" "),t("p",[e._v("The first option is to upgrade your base image - this solves the vast majority of vulnerabilities.\nFor instance, your Dockerfile might start like this:")]),e._v(" "),t("div",{staticClass:"language-dockerfile extra-class"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("FROM")]),e._v(" alpine"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("3.10.0\n")])])]),t("p",[e._v("By updating to the latest version, you can usually patch up any CVEs that were included in that image:")]),e._v(" "),t("div",{staticClass:"language-dockerfile extra-class"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("FROM")]),e._v(" alpine 3.10.5\n")])])]),t("p",[e._v("Even better, many Docker images are published using semver, so you can remove the patch version\nto automatically pull in new patches:")]),e._v(" "),t("div",{staticClass:"language-dockerfile extra-class"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("FROM")]),e._v(" alpine 3.10\n")])])]),t("p",[e._v("If upgrading the base image doesn't solve your problem, you can try using apt-get or cURL in your Dockerfile\nto install the latest version of a particular application. For instance, maybe you were installing NodeJS\nvia an install URL:")]),e._v(" "),t("div",{staticClass:"language-dockerfile extra-class"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("FROM")]),e._v(" alpine 3.10\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("RUN")]),e._v(" curl "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("sL https"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("//deb.nodesource.com/setup_13.x "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("|")]),e._v(" bash\n")])])]),t("p",[e._v("Updating the specified version might fix any vulnerabilities with that particular application. Here\nwe upgrade to Node 14.x:")]),e._v(" "),t("div",{staticClass:"language-dockerfile extra-class"},[t("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("FROM")]),e._v(" alpine 3.10\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("RUN")]),e._v(" curl "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("sL https"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("//deb.nodesource.com/setup_14.x "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("|")]),e._v(" bash\n")])])]),t("h2",{attrs:{id:"images-you-consume"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#images-you-consume"}},[e._v("#")]),e._v(" Images you consume")]),e._v(" "),t("p",[e._v("Many, if not most, of the images in your cluster will be published by third-parties. For example,\nevery add-on like nginx-ingress and cert-manager comes with its own Docker images. When these images\ncontain vulnerabilities, it can be a bit harder to remediate.")]),e._v(" "),t("p",[e._v("The first step is to make sure you're on the latest version. If you're using Helm to install these\nadd-ons, you can check the "),t("strong",[e._v("Add-ons")]),e._v(" tab to see if there are any updates available:")]),e._v(" "),t("img",{attrs:{src:e.$withBase("/img/add-ons.png"),alt:"add-ons tab"}}),e._v(" "),t("p",[e._v("If you're already on the latest version of the Helm chart, or if you're not using Helm,\nyou can check the image registry to see if the downstream image has been updated.")]),e._v(" "),t("img",{attrs:{src:e.$withBase("/img/repo-history.png"),alt:"add-ons tab"}}),e._v(" "),t("p",[e._v("As a last resort, you can try filing an issue with the maintainers of the image or Helm chart.\nLet them know that one of the images they're publishing contains a vulnerability, and hopefully\nthey'll be able to publish a fix.")])])}),[],!1,null,null,null);a.default=i.exports}}]);