(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{367:function(t,e,a){"use strict";a.r(e);var s=a(42),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"workload-configuration"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#workload-configuration"}},[t._v("#")]),t._v(" Workload Configuration")]),t._v(" "),a("p",[t._v("Every workload in Kubernetes comes with a configuration that tells Kubernetes how it should run.\nFor instance, here's a fairly minimal deployment that runs "),a("code",[t._v("nginx")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" apps/v1\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Deployment\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("selector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("matchLabels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("template")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("containers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("latest\n")])])]),a("p",[t._v("Can you tell what it's doing wrong? The answer is: just about everything!")]),t._v(" "),a("p",[t._v("Here are a few of the issues that Polaris - one of the default reports in Insights - will find with this\ndeployment:")]),t._v(" "),a("ul",[a("li",[t._v("There are no liveness or readiness probes set. Kubernetes won't be able to tell if\nthis app crashes, or when it's properly scaled up. This makes it much more likely that we'll experience downtime,\neither as the result of a bug, or just in the normal course of upgrading.")]),t._v(" "),a("li",[t._v("There are no resource requests or limits. We haven't given Kubernetes any clue as to how much memory or CPU we\nexpect nginx to use, so if there's a memory leak, we could end up eating up all the cluster's resources. Or if\nother, better-behaved workloads begin to request resources, there's a chance nginx will be killed to make room for them.")]),t._v(" "),a("li",[t._v("It's using the "),a("code",[t._v("latest")]),t._v(" tag, which could cause us to pull in unwanted updates. It's always good to pin\nthe image to a particular tag, so you know what you're running.")])]),t._v(" "),a("p",[t._v("And we haven't even gotten to the security issues!")]),t._v(" "),a("p",[t._v("To start uncovering issues with workload configuration, you can visit the Action Items tab\nand filter for the "),a("code",[t._v("polaris")]),t._v(" report:")]),t._v(" "),a("div",{staticClass:"mini-img"},[a("img",{attrs:{src:t.$withBase("/img/filter-polaris.png"),alt:"Filter for Polaris items"}})]),t._v(" "),a("p",[t._v("You may also want to filter for particular namespaces. For instance, it's good to start with\nnamespaces for your own applications, rather than core or add-on namespaces like "),a("code",[t._v("kube-system")]),t._v(" or "),a("code",[t._v("metrics-server")]),t._v(".")]),t._v(" "),a("div",{staticClass:"mini-img"},[a("img",{attrs:{src:t.$withBase("/img/filter-namespaces.png"),alt:"Filter namespaces"}})]),t._v(" "),a("p",[t._v("Notice that by default, the Action Items are sorted by severity, with "),a("code",[t._v("danger")]),t._v(" items at the top.\nThis is a good way to pick out the most important items to fix.")]),t._v(" "),a("div",{staticClass:"mini-img"},[a("img",{attrs:{src:t.$withBase("/img/sort-by-severity.png"),alt:"Sort by severity"}})]),t._v(" "),a("p",[t._v("Once you've zeroed in on an item that you'd like to fix, expand it to see a description and\nremediation.")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/img/ai-remediation.png"),alt:"Action item remediation"}}),t._v(" "),a("p",[t._v("Bonus: if you notice any Action Items that can't or shouldn't be fixed, you can mark it as resolved:")]),t._v(" "),a("div",{staticClass:"mini-img"},[a("img",{attrs:{src:t.$withBase("/img/ai-resolution.png"),alt:"Action item resolution"}})]),t._v(" "),a("p",[t._v("And that's it! By following these steps for each of your workloads, you can ensure your applications\nstay secure and reliable.")])])}),[],!1,null,null,null);e.default=n.exports}}]);