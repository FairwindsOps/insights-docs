<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Workload Configuration | Fairwinds Insights Documentation</title>
    <meta name="description" content="Documentation for the Fairwinds Insights Kubernetes auditing platform">
    <meta name="generator" content="VuePress 1.4.0">
    <link rel="icon" href="/favicon.png">
    
    <link rel="preload" href="/assets/css/0.styles.ba5fd3fc.css" as="style"><link rel="preload" href="/assets/js/app.193a343d.js" as="script"><link rel="preload" href="/assets/js/2.6d5e91c3.js" as="script"><link rel="preload" href="/assets/js/22.a2dc0cf8.js" as="script"><link rel="prefetch" href="/assets/js/10.ea75955c.js"><link rel="prefetch" href="/assets/js/11.1f496da6.js"><link rel="prefetch" href="/assets/js/12.2c90ff43.js"><link rel="prefetch" href="/assets/js/13.5ba8c249.js"><link rel="prefetch" href="/assets/js/14.5fef1a1b.js"><link rel="prefetch" href="/assets/js/15.4a7c6b13.js"><link rel="prefetch" href="/assets/js/16.4bcca2ac.js"><link rel="prefetch" href="/assets/js/17.4a897beb.js"><link rel="prefetch" href="/assets/js/18.cb296ac6.js"><link rel="prefetch" href="/assets/js/19.42737a2d.js"><link rel="prefetch" href="/assets/js/20.e7d1ec04.js"><link rel="prefetch" href="/assets/js/21.d1417ecb.js"><link rel="prefetch" href="/assets/js/23.297b1693.js"><link rel="prefetch" href="/assets/js/24.26dda8ef.js"><link rel="prefetch" href="/assets/js/25.b799798e.js"><link rel="prefetch" href="/assets/js/26.13b7aa86.js"><link rel="prefetch" href="/assets/js/27.5795acc7.js"><link rel="prefetch" href="/assets/js/28.36b643a3.js"><link rel="prefetch" href="/assets/js/29.2ef91396.js"><link rel="prefetch" href="/assets/js/3.d6999e40.js"><link rel="prefetch" href="/assets/js/30.64acb032.js"><link rel="prefetch" href="/assets/js/31.4d7102c7.js"><link rel="prefetch" href="/assets/js/32.478d7cde.js"><link rel="prefetch" href="/assets/js/33.73f43504.js"><link rel="prefetch" href="/assets/js/34.5d9418dc.js"><link rel="prefetch" href="/assets/js/35.cce986f7.js"><link rel="prefetch" href="/assets/js/36.be4440da.js"><link rel="prefetch" href="/assets/js/37.52a8e25a.js"><link rel="prefetch" href="/assets/js/38.ffbea69b.js"><link rel="prefetch" href="/assets/js/39.3b29fbff.js"><link rel="prefetch" href="/assets/js/4.7a4d83b2.js"><link rel="prefetch" href="/assets/js/40.f383810c.js"><link rel="prefetch" href="/assets/js/5.4b52774a.js"><link rel="prefetch" href="/assets/js/6.6e06e9f3.js"><link rel="prefetch" href="/assets/js/7.ef2895a8.js"><link rel="prefetch" href="/assets/js/8.9d9b5ec8.js"><link rel="prefetch" href="/assets/js/9.675d875b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ba5fd3fc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.svg" alt="Fairwinds Insights Documentation" class="logo"> <span class="site-name can-hide">Fairwinds Insights Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/" class="sidebar-link">Home</a></li><li><a href="/release-notes/" class="sidebar-link">Release Notes</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Installation</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/installation/getting-started/" class="sidebar-link">Getting Started</a></li><li><a href="/installation/insights-agent/" class="sidebar-link">Insights Agent</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>First Steps</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/first-steps/getting-value/" class="sidebar-link">Getting Value from Fairwinds Insights</a></li><li><a href="/first-steps/workload-configuration/" class="active sidebar-link">Workload Configuration</a></li><li><a href="/first-steps/container-security/" class="sidebar-link">Container Security</a></li><li><a href="/first-steps/cost-efficiency/" class="sidebar-link">Cost Efficiency</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Features</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Reports</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Integrations</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Management</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>API Access</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="workload-configuration"><a href="#workload-configuration" class="header-anchor">#</a> Workload Configuration</h1> <p>Every workload in Kubernetes comes with a configuration that tells Kubernetes how it should run.
For instance, here's a fairly minimal deployment that runs <code>nginx</code>:</p> <div class="language-yaml extra-class"><pre class="language-yaml"><code><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1
<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment
<span class="token key atrule">metadata</span><span class="token punctuation">:</span>
  <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
  <span class="token key atrule">labels</span><span class="token punctuation">:</span>
    <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
<span class="token key atrule">spec</span><span class="token punctuation">:</span>
  <span class="token key atrule">selector</span><span class="token punctuation">:</span>
    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>
      <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
  <span class="token key atrule">template</span><span class="token punctuation">:</span>
    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>
      <span class="token key atrule">labels</span><span class="token punctuation">:</span>
        <span class="token key atrule">app</span><span class="token punctuation">:</span> nginx
    <span class="token key atrule">spec</span><span class="token punctuation">:</span>
      <span class="token key atrule">containers</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> nginx
        <span class="token key atrule">image</span><span class="token punctuation">:</span> nginx<span class="token punctuation">:</span>latest
</code></pre></div><p>Can you tell what it's doing wrong? The answer is: just about everything!</p> <p>Here are a few of the issues that Polaris - one of the default reports in Insights - will find with this
deployment:</p> <ul><li>There are no liveness or readiness probes set. Kubernetes won't be able to tell if
this app crashes, or when it's properly scaled up. This makes it much more likely that we'll experience downtime,
either as the result of a bug, or just in the normal course of upgrading.</li> <li>There are no resource requests or limits. We haven't given Kubernetes any clue as to how much memory or CPU we
expect nginx to use, so if there's a memory leak, we could end up eating up all the cluster's resources. Or if
other, better-behaved workloads begin to request resources, there's a chance nginx will be killed to make room for them.</li> <li>It's using the <code>latest</code> tag, which could cause us to pull in unwanted updates. It's always good to pin
the image to a particular tag, so you know what you're running.</li></ul> <p>And we haven't even gotten to the security issues!</p> <p>To start uncovering issues with workload configuration, you can visit the Action Items tab
and filter for the <code>polaris</code> report:</p> <div class="mini-img"><img src="/img/filter-polaris.png" alt="Filter for Polaris items"></div> <p>You may also want to filter for particular namespaces. For instance, it's good to start with
namespaces for your own applications, rather than core or add-on namespaces like <code>kube-system</code> or <code>metrics-server</code>.</p> <div class="mini-img"><img src="/img/filter-namespaces.png" alt="Filter namespaces"></div> <p>Notice that by default, the Action Items are sorted by severity, with <code>danger</code> items at the top.
This is a good way to pick out the most important items to fix.</p> <div class="mini-img"><img src="/img/sort-by-severity.png" alt="Sort by severity"></div> <p>Once you've zeroed in on an item that you'd like to fix, expand it to see a description and
remediation.</p> <img src="/img/ai-remediation.png" alt="Action item remediation"> <p>Bonus: if you notice any Action Items that can't or shouldn't be fixed, you can mark it as resolved:</p> <div class="mini-img"><img src="/img/ai-resolution.png" alt="Action item resolution"></div> <p>And that's it! By following these steps for each of your workloads, you can ensure your applications
stay secure and reliable.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/FairwindsOps/insights-docs/edit/master/first-steps/workload-configuration.md" target="_blank" rel="noopener noreferrer">Help us improve this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/first-steps/getting-value/" class="prev">
        Getting Value from Fairwinds Insights
      </a></span> <span class="next"><a href="/first-steps/container-security/">
        Container Security
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.193a343d.js" defer></script><script src="/assets/js/2.6d5e91c3.js" defer></script><script src="/assets/js/22.a2dc0cf8.js" defer></script>
  </body>
</html>
