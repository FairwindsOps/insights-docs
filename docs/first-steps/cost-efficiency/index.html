<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Cost Efficiency | Fairwinds Insights Documentation</title>
    <meta name="generator" content="VuePress 1.5.3">
    <link rel="icon" href="/favicon.png">
    <meta name="description" content="Documentation for the Fairwinds Insights Kubernetes auditing platform">
    <link rel="preload" href="/assets/css/0.styles.ba7d046e.css" as="style"><link rel="preload" href="/assets/js/app.b7552713.js" as="script"><link rel="preload" href="/assets/js/2.d0aaf875.js" as="script"><link rel="preload" href="/assets/js/20.cd2621d9.js" as="script"><link rel="prefetch" href="/assets/js/10.95e8994a.js"><link rel="prefetch" href="/assets/js/11.94fbe278.js"><link rel="prefetch" href="/assets/js/12.67ba9854.js"><link rel="prefetch" href="/assets/js/13.f9b526f3.js"><link rel="prefetch" href="/assets/js/14.13242d52.js"><link rel="prefetch" href="/assets/js/15.b8085640.js"><link rel="prefetch" href="/assets/js/16.181a3ec8.js"><link rel="prefetch" href="/assets/js/17.daffa268.js"><link rel="prefetch" href="/assets/js/18.56947fc0.js"><link rel="prefetch" href="/assets/js/19.431c02e4.js"><link rel="prefetch" href="/assets/js/21.093f1251.js"><link rel="prefetch" href="/assets/js/22.bbe87c87.js"><link rel="prefetch" href="/assets/js/23.2f3a810f.js"><link rel="prefetch" href="/assets/js/24.09b97633.js"><link rel="prefetch" href="/assets/js/25.c8a8f748.js"><link rel="prefetch" href="/assets/js/26.044eee2e.js"><link rel="prefetch" href="/assets/js/27.bb7c0ba1.js"><link rel="prefetch" href="/assets/js/28.4c84525b.js"><link rel="prefetch" href="/assets/js/29.392e0389.js"><link rel="prefetch" href="/assets/js/3.dd930c85.js"><link rel="prefetch" href="/assets/js/30.c81f7dd9.js"><link rel="prefetch" href="/assets/js/31.5e722c05.js"><link rel="prefetch" href="/assets/js/32.4b2b2306.js"><link rel="prefetch" href="/assets/js/33.5df5845e.js"><link rel="prefetch" href="/assets/js/34.103cff8e.js"><link rel="prefetch" href="/assets/js/35.eb95fe80.js"><link rel="prefetch" href="/assets/js/36.5ef2f91c.js"><link rel="prefetch" href="/assets/js/37.e2707fd5.js"><link rel="prefetch" href="/assets/js/38.2205922a.js"><link rel="prefetch" href="/assets/js/39.ab4fcd47.js"><link rel="prefetch" href="/assets/js/4.3b6a7e49.js"><link rel="prefetch" href="/assets/js/5.c03b1cde.js"><link rel="prefetch" href="/assets/js/6.7c1f35f3.js"><link rel="prefetch" href="/assets/js/7.cf565cf0.js"><link rel="prefetch" href="/assets/js/8.72bdfd08.js"><link rel="prefetch" href="/assets/js/9.9665c39f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ba7d046e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.svg" alt="Fairwinds Insights Documentation" class="logo"> <span class="site-name can-hide">Fairwinds Insights Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">Home</a></li><li><a href="/release-notes/" class="sidebar-link">Release Notes</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Installation</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/installation/getting-started/" class="sidebar-link">Getting Started</a></li><li><a href="/installation/insights-agent/" class="sidebar-link">Insights Agent</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>First Steps</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/first-steps/getting-value/" class="sidebar-link">Getting Value from Fairwinds Insights</a></li><li><a href="/first-steps/workload-configuration/" class="sidebar-link">Workload Configuration</a></li><li><a href="/first-steps/container-security/" class="sidebar-link">Container Security</a></li><li><a href="/first-steps/cost-efficiency/" aria-current="page" class="active sidebar-link">Cost Efficiency</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Features</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Reports</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Integrations</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Management</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>API Access</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="cost-efficiency"><a href="#cost-efficiency" class="header-anchor">#</a> Cost Efficiency</h1> <p>Cost attribution and resource tuning can be one of the most difficult and tedious
parts of running Kubernetes at scale. Fairwinds Insights provides some features to
help make this process simpler and more automated.</p> <p>The first step is to start mapping CPU and memory usage back to dollars. This is a
<a href="https://www.fairwinds.com/blog/5-problems-with-kubernetes-cost-estimation-strategies" target="_blank" rel="noopener noreferrer">very difficult problem<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
and inevitably somewhat subjective: how should we rank a CPU-intensive application against
a memory-intensive application? In order to accurately attribute cost, we have to find ways of
comparing apples to oranges.</p> <p>To help us best estimate workload costs in your cluster, we ask for a few pieces of information
the first time you visit the <strong>Workloads</strong> tab: your average node size, your average node cost,
and the strategy you'd like to use for workload estimation (more on that below).</p> <img src="/img/cost-settings.png" alt="Cost settings"> <p>We've pre-populated a list of instance types from AWS and GCP, but you can also set custom numbers
if you're running on a different cloud provider or if you're using spot instances. If you have
multiple node types in your cluster, use the most representative type.</p> <p>These numbers don't have to be perfectly accurate - they simply give us a baseline for converting
memory and CPU to dollars. Namely, we will take the cost per node-hour, and attribute half that
cost to memory, and half to CPU. By dividing those numbers by the amount of memory and CPU in
a single node, we can come to per-CPU and per-GB-memory costs.</p> <p>To determine the cost of a particular workload, we offer two strategies:</p> <ul><li><strong>conservative</strong> - this takes into account the potential waste incurred by
memory- or CPU- intensive workloads, if Kubernetes is unable to bin-pack efficiently.
It is calculated as <code>2 * max(cpu_cost, memory_cost)</code></li> <li><strong>optimistic</strong> - this assumes Kubernetes can bin-pack your workloads efficiently.
It is calculated as <code>cpu_cost + memory_cost</code></li></ul> <p>If you have spent time optimizing your node size, or if you're running a large variety
of workloads that are small relative to your node size, the <strong>optimistic</strong> strategy
will probably be more accurate. Otherwise, we recommend the <strong>conservative</strong> strategy.</p> <p>You can <a href="https://www.fairwinds.com/blog/5-problems-with-kubernetes-cost-estimation-strategies" target="_blank" rel="noopener noreferrer">read more about cost estimation on our blog<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="viewing-workload-costs"><a href="#viewing-workload-costs" class="header-anchor">#</a> Viewing Workload Costs</h2> <p>On the <strong>Workloads</strong> tab, you can see a list of all the workloads in your cluster. By default, they'll
be sorted by their <em>Average Total Cost</em>. This number utilizes resource requests and limits (if specified),
and average pod count to estimate the average cost of each workload.</p> <img src="/img/workload-costs.png" alt="Workload costs"> <p>In the next column, you'll see <em>Total Costs with Recommendations</em>, followed by <em>Cost Difference with Recommendations</em>.
If you're not seeing values in these fields, make sure the <code>goldilocks</code> report is installed and
operating properly.</p> <p>Goldilocks analyzes actualy resource usage for your <code>Deployments</code>, and makes recommendations for
how much memory and CPU you <em>should</em> be setting for your requests and limits. While it may recommend
moving resources up or down, we typically find that teams have set resources too high, since
workloads with resources that are too low will experience noticeable performance issues.</p> <p>If you notice a workload with substantial savings available, you can click into it to see what
Goldilocks recommends you set your resource requests and limits to:</p> <img src="/img/workload-recommendations.png" alt="Workload recommendations"> <p>Here, Goldilocks has recommended that we change our memory requests and limits from <code>1Gi</code> to
<code>263M</code> (a savings of around 75%), and our CPU requests and limits from <code>500m</code> to <code>25m</code>, for a savings
of 95%.</p> <p>Note that these recommendations should be sanity checked by the user. If your application experiences
periodic bursts in traffic, you may want to keep your limits relatively high. For mission-critical
applications, it's wise to make these changes gradually, monitoring your application for any degradation
in performance along the way.</p> <p>It's also good to let Goldilocks gather usage data for 1-7 days before taking its recommendations.
Without a good, representative baseline for actual resource usage, Goldilocks won't be able to
make confident recommendations.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/FairwindsOps/insights-docs/edit/master/first-steps/cost-efficiency.md" target="_blank" rel="noopener noreferrer">Help us improve this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/first-steps/container-security/" class="prev">
        Container Security
      </a></span> <span class="next"><a href="/features/cluster-summary/">
        Cluster Summary
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b7552713.js" defer></script><script src="/assets/js/2.d0aaf875.js" defer></script><script src="/assets/js/20.cd2621d9.js" defer></script>
  </body>
</html>
